checkout:
  post:
    - git submodule sync
    - git submodule update --init --recursive

machine:
  timezone: Asia/Tokyo

dependencies:
  pre:
    - go get -v github.com/spf13/hugo

test:
  override:
    - hugo
    
deployment:
  push_to_server:
    branch: master
      commands:
        - aws s3 sync public s3://$S3_BACKET > /dev/null 2>&1
        - aws cloudfront create-invalidation --distribution-id $CF_DIST_1 --paths "/*" > /dev/null 2>&1
